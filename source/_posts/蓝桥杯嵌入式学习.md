---
title: 蓝桥杯嵌入式
date : 2025-2-17 12:00:00
description : 转战蓝桥杯嵌入式
categories: 竞赛
sticky : 4
top_img : https://cdn.jsdelivr.net/gh/C29999/P.bed/c1e08a939b6c52de64842ad27d4d6fad.png
cover : https://cdn.jsdelivr.net/gh/C29999/P.bed/c1e08a939b6c52de64842ad27d4d6fad.png
tags : 竞赛
---

## LED

开发板上的电路图
1 ![点亮一个LED](https://cdn.jsdelivr.net/gh/C29999/P.bed/ca3479b74e8483c35070d97aaec84e0e.png)

![芯片引脚配置](https://cdn.jsdelivr.net/gh/C29999/P.bed/b7f16563a6c90933f41c093512f9b8a1.png)

RCC和SYS的作用

RCC：模块负责管理单片机的时钟系统，控制外部和内部时钟源的选择，频率调节，时钟使能
SYS：SYS模块主要负责管理单片机的系统时钟，包括电源管理和复位控制等功能。

用到的HAL库函数

``` C++

void HAL_GPIO_WritePin(GPIO_TypeDef* GPIOx, uint16_t GPIO_Pin, GPIO_PinState PinState);
//功能：配置引脚电平状态
//参数说明：
//GPIOx：端口号 GPIOA,GPIOB,GPIOC
//GPIO_PinStats PinState : GPIO_PIN_SET 设置引脚为高电平

void HAL_GPIO_TogglePin(GPIO_TypeDef* GPIOx, uint16_t GPIO_Pin);
//功能：反转引脚电平状态
void HAL_Delay(uint32_t Delay);
//功能：延迟 Delay 毫秒
```

### 位运算

``` C++

uint_32t ucled=0x02;//00000010
ucled<<8;//表示将ucled左移8位，变成00000010 00000000,对应位GPIOP9

```

位运算向左实现流水灯：

``` C++

void Led_Disp(uint8_t ucLed)
{
    HAL_GPIO_WritePin(GPIOC,0XFF<<8,GPIO_PIN_SET)//熄灭所有灯
    HAL_GPIO_WritePin(GPIOC,ucLed<<8,GPIO_PIN_RESET)//点亮指定的灯

}

//解释：0xFF：1111 1111 ，ucled:写低对应的GPIO
//关于为什么他是GPIO点亮，因为是共阳极LED电路

//关于实现流水灯

uint8_t ucLed=0x01;

LED_Disp(ucLed);
HAL_Delay(100);
ucLed<<=1;//
IF(ucLed==0)//判断是否溢出
{ucLed=0x01}//重置

//每次点亮下一个LED，延迟100ms，然后左移一位

```

### 系统滴答定时器(SysTick)

``` C++
void SysTick_Handler(void)
{
/* USER CODE BEGIN SysTick_IRQn 0 */
/* USER CODE END SysTick_IRQn 0 */
HAL_IncTick();
/* USER CODE BEGIN SysTick_IRQn 1 */
usled++;//实现usled每隔1ms自增1
/* USER CODE END SysTick_IRQn 1 */
}

```

这是一个嵌入式中断服务函数,在主函数调用HAl_Init()时,会自动配置SysTick定时器

### 按键

KEY按键电路图

 ![按键电路图](https://cdn.jsdelivr.net/gh/C29999/P.bed/a3cd2fbe0b15db262bd0295475944d9b.png)

HAL函数库说明：

``` C++

GPIO_PinState HAL_GPIO_ReadPin(GPIO_TypeDef* GPIOx, uint16_t GPIO_Pin);
//功能：读取引脚电平状态
//参数说明：
//端口号：GPIOX，端口号 GPIOA,GPIOB,GPIOC
//GPIO_Pin:引脚号
//返回为引脚的高低电平

```

#### 按键三行代码

按键的三种状态

``` C++

key_down //按键下降沿检测，只在按键按下瞬间为按键值，其他时刻全为0
key_up //按键上升沿检测，只在按键释放瞬间为按键值，其他时刻全为0
key_old //保存上一次检测按键值

```

key_val ^ key_old 会计算当前按键状态与上一状态的异或结果

>关于位运算^: 如果两个对应的位相同,则该位的结果为0；如果不同，结果为1。
